<!doctype html>
<!-- nav update: 2025-10-27 – GlassNav v2.1 (bundled via scripts/nav.js) -->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>B.A.S.E. — Home (mobile-friendly with icon fallbacks)</title>

  <!-- Icons & Preloads -->
  <link rel="icon" href="./lib/assets/images/logos/base-logo.png">
  <link rel="preload" as="image" href="./lib/assets/images/logos/base-logo.png">

  <!-- Core Styles -->
  <link rel="stylesheet" href="./styles/base.css">

  <!-- App data & feature scripts (defer) -->
  <script defer src="./Applications/JSON/app-registry.js"></script>
  <script defer src="./scripts/briefings.js"></script>
  <script defer src="./scripts/data.js"></script>
  <script defer src="./scripts/apps.js"></script>
  <script defer src="./scripts/main.js"></script>
  <!-- GlassNav (injects its own CSS + gradients + underline sizing) -->
  <script defer src="./scripts/nav.js"></script>
</head>

<body>

  <!-- Primary Navigation (GlassNav v2.1) -->
  <nav class="glassnav" role="navigation" aria-label="Primary">
    <div class="nav-inner">
      <a class="nav-logo" href="./index.html" aria-label="BASE home">
        <img src="./lib/assets/images/logos/base-logo.png" alt="BASE" height="44" width="44" loading="lazy">
      </a>

      <ul class="nav-list">
        <li>
          <a class="nav-link is-active" data-page="home" href="./index.html" aria-current="page">
            <span class="label">Home</span>
            <svg class="underline" viewBox="0 0 120 14" preserveAspectRatio="none">
              <path d="M6,10 Q60,2 114,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="briefing" href="./briefing.html">
            <span class="label">Briefing</span>
            <svg class="underline" viewBox="0 0 120 14" preserveAspectRatio="none">
              <path d="M6,10 Q60,2 114,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="applications" href="./applications.html">
            <span class="label">Applications</span>
            <svg class="underline" viewBox="0 0 140 14" preserveAspectRatio="none">
              <path d="M6,10 Q70,2 134,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="forms" href="./forms.html">
            <span class="label">Forms</span>
            <svg class="underline" viewBox="0 0 90 14" preserveAspectRatio="none">
              <path d="M6,10 Q45,2 84,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="recoveries" href="./recoveries.html">
            <span class="label">Recoveries</span>
            <svg class="underline" viewBox="0 0 130 14" preserveAspectRatio="none">
              <path d="M6,10 Q65,2 124,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="directory" href="./directory.html">
            <span class="label">Directory</span>
            <svg class="underline" viewBox="0 0 120 14" preserveAspectRatio="none">
              <path d="M6,10 Q60,2 114,10" />
            </svg>
          </a>
        </li>
        <li>
          <a class="nav-link" data-page="settings" href="./settings.html">
            <span class="label">Settings</span>
            <svg class="underline" viewBox="0 0 105 14" preserveAspectRatio="none">
              <path d="M6,10 Q52,2 99,10" />
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- MAIN -->
  <main id="home" class="container">
    <div class="grid grid--main">
      <!-- LEFT -->
      <div data-col="left">
        <section class="hero" aria-labelledby="welcome">
          <h1 id="welcome">Welcome to B.A.S.E.</h1>
          <p>Your central hub for operational briefings, systems, and intelligence</p>
        </section>

        <section class="card" id="sec-briefings">
          <div class="card-head">
            <h2>Latest Briefings</h2>
            <div class="chip">Operational updates and incident notices</div>
            <div class="spacer"></div>
            <div class="row gap8">
              <button id="btn-refresh-briefs" class="btn primary" type="button">Refresh</button>
              <button id="btn-add" class="btn success" type="button">Add New Briefing</button>
            </div>
          </div>

          <div id="briefings-empty" class="empty" hidden>No briefings yet.</div>

          <div id="file-warning" class="notice" hidden>
            <strong>Local file access:</strong> Couldn’t read <span class="kbd">briefings.json</span>. Load once via picker:
            <div class="mt8"><input id="briefings-file-input" type="file" accept=".json,application/json"></div>
          </div>

          <div id="briefings-grid" class="brief-grid"></div>
        </section>
      </div>

      <!-- RIGHT -->
      <aside id="sec-apps" data-col="right">
        <div class="card" style="padding:24px;">
          <div class="section-head">
            <h3>Top Applications</h3>
            <div class="section-head-actions">
              <button id="btn-reload-links" class="btn ghost no-caret" type="button">Reload links</button>
              <a class="btn-ghost" href="./applications.html">View All ›</a>
            </div>
          </div>

          <div id="apps-error" class="notice danger" hidden>
            <strong>Apps unavailable.</strong>
            <p id="apps-error-message" style="margin:6px 0 0;">
              Unable to load <span class="kbd">Applications/JSON/app.json</span>. Refresh the page or replace the file on the shared drive.
            </p>
          </div>

          <section class="topapps-grid" id="apps-grid" role="region" aria-label="External tools"></section>

          <div id="apps-meta" class="topapps-meta" hidden>
            <span id="apps-meta-version"></span>
            <span id="apps-meta-updated"></span>
            <span id="apps-meta-updated-by"></span>
          </div>
        </div>
      </aside>

      <!-- Recent Recoveries (RIGHT) -->
      <aside class="card" id="sec-recoveries" data-col="right">
        <div class="card-head">
          <h2>Recent Recoveries</h2>
          <a href="./recoveries.html" class="btn ghost">View All</a>
        </div>
        <div class="recover-grid" id="recover-grid"></div>
      </aside>

      <!-- Morning Intel (RIGHT) -->
      <aside class="card" id="sec-intel" data-col="right">
        <div class="card-head"><h2>Morning Intel</h2></div>
        <div class="intel-item">
          <div class="intel-meta">
            <span class="badge general">Intel</span>
            <span class="muted">1 hour ago • Sam Bow</span>
          </div>
          <p class="intel-text">Overnight activity summary.</p>
        </div>
      </aside>
    </div>
  </main>

  <!-- Add Briefing Modal -->
  <div id="modal-add" class="modal" hidden>
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="add-title">
      <h3 id="add-title">Add New Briefing</h3>
      <form id="add-form" class="form">
        <label>Type
          <select id="f-type" required>
            <option value="">Select type…</option>
            <option value="person">Person</option>
            <option value="vehicle">Vehicle</option>
            <option value="incident">Incident</option>
            <option value="general">General</option>
          </select>
        </label>
        <label>Title <input id="f-title" type="text" required /></label>
        <label style="grid-column:1/-1">Description <textarea id="f-desc" required></textarea></label>
        <label>Image (optional) <input id="f-image" type="file" accept="image/*" />
          <small class="muted">Embedded as base64 in JSON</small>
        </label>
        <label>Submitter <input id="f-by" type="text" placeholder="PC Wishart T329" required /></label>
        <div class="row" style="grid-column:1/-1;justify-content:flex-end;gap:8px">
          <button type="button" id="btn-cancel" class="btn">Cancel</button>
          <button type="submit" class="btn success">Save &amp; Download JSON</button>
        </div>
      </form>
    </div>
  </div>

</body>
</html>